"use strict";(()=>{var y={create(t,e,r){return this.update(t,0,e,r)},update(t,e,r=0,i){var a=y.Table,n=i??t.length;e^=4294967295;for(var s=n&7;s--;++r)e=e>>>8^a[(e^t[r])&255];for(var s=n>>3;s--;r+=8)e=e>>>8^a[(e^t[r])&255],e=e>>>8^a[(e^t[r+1])&255],e=e>>>8^a[(e^t[r+2])&255],e=e>>>8^a[(e^t[r+3])&255],e=e>>>8^a[(e^t[r+4])&255],e=e>>>8^a[(e^t[r+5])&255],e=e>>>8^a[(e^t[r+6])&255],e=e>>>8^a[(e^t[r+7])&255];return(e^4294967295)>>>0},single(t,e){return y.Table[(t^e)&255]^e>>>8},Table:new Uint32Array(256),init(){for(var t=0;t<256;++t){for(var e=t,r=0;r<8;++r)e=e&1?3988292384^e>>>1:e>>>1;this.Table[t]=e>>>0}}};y.init();var S=class t{constructor(e,r=0){this.bitindex=0;if(this.buffer=e instanceof Uint8Array?e:new Uint8Array(32768),this.index=r,this.buffer.length*2<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()}expandBuffer(){var e=this.buffer,r=new Uint8Array(e.length<<1);return r.set(e),this.buffer=r,r}rev32(e){return t.ReverseTable[e&255]<<24|t.ReverseTable[e>>>8&255]<<16|t.ReverseTable[e>>>16&255]<<8|t.ReverseTable[e>>>24&255]}writeBits(e,r,i=!1){var a=this.buffer,n=this.index,s=this.bitindex,f=a[n],o;if(i&&r>1&&(e=r>8?this.rev32(e)>>32-r:t.ReverseTable[e]>>8-r),r+s<8)f=f<<r|e,s+=r;else for(o=0;o<r;++o)f=f<<1|e>>r-o-1&1,++s===8&&(s=0,a[n++]=t.ReverseTable[f],f=0,n===a.length&&(a=this.expandBuffer()));a[n]=f,this.buffer=a,this.bitindex=s,this.index=n}finish(){var e=this.buffer,r=this.index,i;return this.bitindex>0&&(e[r]<<=8-this.bitindex,e[r]=t.ReverseTable[e[r]],r++),i=e.subarray(0,r),i}static init(){this.ReverseTable=new Uint8Array(256).map((e,r)=>{var i=r,a=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=r&1,--a;return i<<a&255})}};S.init();var z=class{constructor(e){this.length=0;this.nodes=0;this.buffer=new Uint16Array(e*2)}getParent(e){return e-2>>2<<1}getChild(e){return 2*e+2}push(e,r){var i,a,n=this.buffer,s;for(i=this.length,n[this.length++]=r,n[this.length++]=e,this.nodes++;i>0&&(a=this.getParent(i),n[i]>n[a]);)s=n[i],n[i]=n[a],n[a]=s,s=n[i+1],n[i+1]=n[a+1],n[a+1]=s,i=a;return this.length}pop(){var e=this.buffer,r,i=e[0],a=e[1];this.nodes--,this.length-=2,e[0]=e[this.length],e[1]=e[this.length+1];for(var n=0;;){var s=this.getChild(n);if(s>=this.length)break;if(s+2<this.length&&e[s+2]>e[s]&&(s+=2),e[s]>e[n])r=e[n],e[n]=e[s],e[s]=r,r=e[n+1],e[n+1]=e[s+1],e[s+1]=r;else break;n=s}return{index:a,value:i,length:this.length}}};function E(t){var e=t.length,r,i,a,n,s,f,o=0,u=Number.POSITIVE_INFINITY;for(n=0;n<e;++n)t[n]>o&&(o=t[n]),t[n]<u&&(u=t[n]);var b=1<<o,m=new Uint32Array(b);for(r=1,i=0,a=2;r<=o;){for(n=0;n<e;++n)if(t[n]===r){var l=0,h=i;for(s=0;s<r;++s)l=l<<1|h&1,h>>=1;for(f=r<<16|n,s=l;s<b;s+=a)m[s]=f;++i}++r,i<<=1,a<<=1}return[m,o,u]}var ae=258,N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ne=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),O=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),se=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),H=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),oe=function(){var t=new Uint8Array(288).map((e,r)=>r<=143?8:r<=255?9:r<=279?7:8);return E(t)}(),fe=function(){var t=new Uint8Array(30).map(e=>5);return E(t)}(),B=class{constructor(e,r={}){this.buffer=null;this.block=[];this.blocks=[];this.bufferSize=32768;this.totalpos=0;this.ip=0;this.op=0;this.bitsbuf=0;this.bitsbuflen=0;this.bfinal=!1;this.bufferType=1;this.resize=!1;this.currentLitlenTable=null;this.input=e instanceof Uint8Array?e:new Uint8Array(e),this.ip=r.index??0,this.bufferSize=r.bufferSize??32768,this.bufferType=r.bufferType??1,this.resize=r.resize??!1,this.bufferType==0?(this.op=32768,this.output=new Uint8Array(32768+this.bufferSize+ae)):(this.op=0,this.output=new Uint8Array(this.bufferSize))}decompress(){for(;!this.bfinal;)this.parseBlock();switch(this.bufferType){case 0:return this.concatBufferBlock();case 1:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}}parseBlock(){var e=this.readBits(3);switch(e&1&&(this.bfinal=!0),e>>>=1,e){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}}readBits(e){var r=this.bitsbuf,i=this.bitsbuflen,a=this.input,n=this.ip,s=a.length,f;if(n+(e-i+7>>3)>=s)throw new Error("input buffer is broken");for(;i<e;)r|=a[n++]<<i,i+=8;return f=r&(1<<e)-1,r>>>=e,i-=e,this.bitsbuf=r,this.bitsbuflen=i,this.ip=n,f}readCodeByTable(e){for(var r=this.bitsbuf,i=this.bitsbuflen,a=this.input,n=this.ip,s=a.length,f=e[0],o=e[1];i<o&&!(n>=s);)r|=a[n++]<<i,i+=8;var u=f[r&(1<<o)-1],b=u>>>16;if(b>i)throw new Error("invalid code length: "+b);return this.bitsbuf=r>>b,this.bitsbuflen=i-b,this.ip=n,u&65535}parseUncompressedBlock(){var e=this.input,r=this.ip,i=this.output,a=this.op,n=e.length,s=i.length;if(this.bitsbuf=0,this.bitsbuflen=0,r+1>=n)throw new Error("invalid uncompressed block header: LEN");var f=e[r++]|e[r++]<<8;if(r+1>=n)throw new Error("invalid uncompressed block header: NLEN");var o=e[r++]|e[r++]<<8;if(f===~o)throw new Error("invalid uncompressed block header: length verify");if(r+f>e.length)throw new Error("input buffer is broken");switch(this.bufferType){case 0:for(;a+f>i.length;){var u=s-a;f-=u,i.set(e.subarray(r,r+u),a),a+=u,r+=u,this.op=a,i=this.expandBufferBlock(),a=this.op}break;case 1:for(;a+f>i.length;)i=this.expandBufferAdaptive(0,2);break;default:throw new Error("invalid inflate mode")}i.set(e.subarray(r,r+f),a),a+=f,r+=f,this.ip=r,this.op=a,this.output=i}parseFixedHuffmanBlock(){switch(this.bufferType){case 1:this.decodeHuffmanAdaptive(oe,fe);break;case 0:this.decodeHuffmanBlock(oe,fe);break;default:throw new Error("invalid inflate mode")}}parseDynamicHuffmanBlock(){for(var e=this.readBits(5)+257,r=this.readBits(5)+1,i=this.readBits(4)+4,a=new Uint8Array(N.length),n=0;n<i;++n)a[N[n]]=this.readBits(3);for(var s=E(a),f=new Uint8Array(e+r),o=0,n=0;n<e+r;){var u=this.readCodeByTable(s);switch(u){case 16:for(var b=3+this.readBits(2);b--;)f[n++]=o;break;case 17:for(var b=3+this.readBits(3);b--;)f[n++]=0;o=0;break;case 18:for(var b=11+this.readBits(7);b--;)f[n++]=0;o=0;break;default:f[n++]=u,o=u;break}}var m=E(f.subarray(0,e)),l=E(f.subarray(e));switch(this.bufferType){case 1:this.decodeHuffmanAdaptive(m,l);break;case 0:this.decodeHuffmanBlock(m,l);break;default:throw new Error("invalid inflate mode")}}decodeHuffmanBlock(e,r){var i=this.output,a=this.op;this.currentLitlenTable=e;for(var n=i.length-ae,s;(s=this.readCodeByTable(e))!==256;){if(s<256){a>=n&&(this.op=a,i=this.expandBufferBlock(),a=this.op),i[a++]=s;continue}var f=s-257,o=ne[f];O[f]>0&&(o+=this.readBits(O[f])),s=this.readCodeByTable(r);var u=se[s];for(H[s]>0&&(u+=this.readBits(H[s])),a>=n&&(this.op=a,i=this.expandBufferBlock(),a=this.op);o--;)i[a]=i[a++-u]}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=a}decodeHuffmanAdaptive(e,r){var i=this.output,a=this.op;this.currentLitlenTable=e;for(var n=i.length,s;(s=this.readCodeByTable(e))!==256;){if(s<256){a>=n&&(i=this.expandBufferAdaptive(),n=i.length),i[a++]=s;continue}var f=s-257,o=ne[f];O[f]>0&&(o+=this.readBits(O[f])),s=this.readCodeByTable(r);var u=se[s];for(H[s]>0&&(u+=this.readBits(H[s])),a+o>n&&(i=this.expandBufferAdaptive(),n=i.length);o--;)i[a]=i[a++-u]}for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=a}expandBufferBlock(){var e=new Uint8Array(this.op-32768),r=this.op-32768,i=this.output;return e.set(i.subarray(32768,e.length)),this.blocks.push(e),this.totalpos+=e.length,i.set(i.subarray(r,r+32768)),this.op=32768,i}expandBufferAdaptive(e=0,r){var i=Math.floor(this.input.length/this.ip+1),a,n=this.input,s=this.output;if(i=(r??i)+e,i<2){var f=(n.length-this.ip)/this.currentLitlenTable[2],o=Math.floor(f*129);a=o<s.length?s.length+o:s.length<<1}else a=s.length*i;var u=new Uint8Array(a);return u.set(s),this.output=u,this.output}concatBufferBlock(){var e=0,r=this.totalpos+(this.op-32768),i=this.output,a=this.blocks,n=new Uint8Array(r),s,f;if(a.length===0)return this.output.subarray(32768,this.op);for(var o=0;o<a.length;++o){var u=a[o];n.set(u,e),e+=u.length}for(var o=32768;o<this.op;++o)n[e++]=i[o];return this.blocks=[],this.buffer=n,this.buffer}concatBufferDynamic(){var e=this.op,r;return this.resize?(r=new Uint8Array(e),r.set(this.output.subarray(0,e))):r=this.output.subarray(0,e),this.buffer=r,this.buffer}};var be={getLengthCode(t){switch(!0){case t===3:return[257,t-3,0];case t===4:return[258,t-4,0];case t===5:return[259,t-5,0];case t===6:return[260,t-6,0];case t===7:return[261,t-7,0];case t===8:return[262,t-8,0];case t===9:return[263,t-9,0];case t===10:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case t===258:return[285,t-258,0];default:throw"invalid length: "+t}},getDistanceCode(t){switch(!0){case t===1:return[0,t-1,0];case t===2:return[1,t-2,0];case t===3:return[2,t-3,0];case t===4:return[3,t-4,0];case t<=6:return[4,t-5,1];case t<=8:return[5,t-7,1];case t<=12:return[6,t-9,2];case t<=16:return[7,t-13,2];case t<=24:return[8,t-17,3];case t<=32:return[9,t-25,3];case t<=48:return[10,t-33,4];case t<=64:return[11,t-49,4];case t<=96:return[12,t-65,5];case t<=128:return[13,t-97,5];case t<=192:return[14,t-129,6];case t<=256:return[15,t-193,6];case t<=384:return[16,t-257,7];case t<=512:return[17,t-385,7];case t<=768:return[18,t-513,8];case t<=1024:return[19,t-769,8];case t<=1536:return[20,t-1025,9];case t<=2048:return[21,t-1537,9];case t<=3072:return[22,t-2049,10];case t<=4096:return[23,t-3073,10];case t<=6144:return[24,t-4097,11];case t<=8192:return[25,t-6145,11];case t<=12288:return[26,t-8193,12];case t<=16384:return[27,t-12289,12];case t<=24576:return[28,t-16385,13];case t<=32768:return[29,t-24577,13];default:throw"invalid distance"}},create(t){return this.getLengthCode(t.len).concat(this.getDistanceCode(t.backwardDistance))}},M=class{constructor(e,r){this.table={};this.pos=0;this.prevMatch=null;this.skipLength=0;this.lazy=0;this.input=e,this.output=new Uint16Array(e.length*2),this.lazy=r,this.freqsLitLen=new Uint32Array(286),this.freqsLitLen[256]=1,this.freqsDist=new Uint32Array(30)}writeNum(e){this.output[this.pos++]=e}writeMatch(e,r){for(var i=be.create(e),a=0;a<i.length;a++)this.writeNum(i[a]);this.freqsLitLen[i[0]]++,this.freqsDist[i[3]]++,this.skipLength=e.len+r-1,this.prevMatch=null}maxMatchTest(e,r,i){for(var a=i;a>3;a--)if(this.input[e+a-1]!==this.input[r+a-1])return!1;return!0}searchLongestMatch(e,r){for(var i=r[r.length],a=0,n=this.input.length,s=0;s<r.length;s++){var f=r[r.length-s-1],o=3;if(a>3){var u=a;if(!this.maxMatchTest(f,e,a))continue;o=a}for(;o<258&&e+o<n&&this.input[f+o]==this.input[e+o];)o++;if(o>a&&(i=f,a=o),o==258)break}return{len:a,backwardDistance:e-i}}encode(){var e={},r,i=this.input.length;for(r=0;r<i;++r){for(var a=0,n=0;n<3&&r+n!==i;n++)a=a<<8|this.input[r+n];e[a]===void 0&&(e[a]=[]);var s=e[a];if(this.skipLength-- >0){s.push(r);continue}for(;s.length>0&&r-s[0]>32768;)s.shift();if(r+3>=i){this.prevMatch&&this.writeMatch(this.prevMatch,-1);for(var n=r;n<i;n++){var f=this.input[n];this.writeNum(f),this.freqsLitLen[f]++}break}if(s.length>0){var o=this.searchLongestMatch(r,s);this.prevMatch?this.prevMatch.len<o.len?(f=this.input[r-1],this.writeNum(f),this.freqsLitLen[f]++,this.writeMatch(o,0)):this.writeMatch(this.prevMatch,-1):o.len<this.lazy?this.prevMatch=o:this.writeMatch(o,0)}else if(this.prevMatch)this.writeMatch(this.prevMatch,-1);else{var f=this.input[r];this.writeNum(f),this.freqsLitLen[f]++}s.push(r)}return this.writeNum(256),this.freqsLitLen[256]++,this.output=this.output.subarray(0,this.pos),this.output}};function A(t){for(var e=new Uint8Array(t.length),r=0;r<e.length;r++)e[r]=t[r].charCodeAt(0)&255;return e}var d=class{constructor(e,r=0){this.buffer=e,this.p=r,this.length=e.length}get pointer(){return this.p}set pointer(e){this.p=e}get offset(){return this.p}set offset(e){this.p=e}truncateBuffer(e){return this.buffer=this.buffer.subarray(0,e),this.length=e,this.buffer}expandLength(e){let r=new Uint8Array(e);return r.set(this.buffer),this.buffer=r,this.length=e,this.buffer}setLength(e){e>this.length?this.expandLength(e):this.truncateBuffer(e)}restoreBuffer(){this.buffer=new Uint8Array(this.buffer.buffer)}readByte(){return this.buffer[this.p++]}writeByte(e){this.buffer[this.p++]=e}readShort(){return this.buffer[this.p++]|this.buffer[this.p++]<<8}writeShort(e){this.buffer[this.p++]=e&255,this.buffer[this.p++]=e>>>8&255}readUint(){return(this.buffer[this.p++]|this.buffer[this.p++]<<8|this.buffer[this.p++]<<16|this.buffer[this.p++]<<24)>>>0}writeUint(e){this.buffer[this.p++]=e&255,this.buffer[this.p++]=e>>>8&255,this.buffer[this.p++]=e>>>16&255,this.buffer[this.p++]=e>>>24&255}readUintBE(){return(this.buffer[this.p++]<<24|this.buffer[this.p++]<<16|this.buffer[this.p++]<<8|this.buffer[this.p++])>>>0}writeUintBE(e){this.buffer[this.p++]=e>>>24&255,this.buffer[this.p++]=e>>>16&255,this.buffer[this.p++]=e>>>8&255,this.buffer[this.p++]=e&255}readArray(e){return this.buffer.subarray(this.p,this.p+=e)}writeArray(e){this.buffer.set(e,this.p),this.p+=e.length}readString(e){return new TextDecoder().decode(this.readArray(e))}writeString(e){this.writeArray(new TextEncoder().encode(e))}readAscii(e){var r="",i=this.readArray(e);return i.forEach(a=>{r+=String.fromCharCode(a)}),r}writeAscii(e){this.writeArray(A(e))}};var pe=16,ce=286,ve=function(){var t=[],e;for(e=0;e<288;e++)switch(!0){case e<=143:t.push([e+48,8]);break;case e<=255:t.push([e-144+400,9]);break;case e<=279:t.push([e-256+0,7]);break;case e<=287:t.push([e-280+192,8]);break;default:throw"invalid literal: "+e}return t}(),T=class{constructor(e,r={}){this.op=0;this.input=e instanceof Uint8Array?e:new Uint8Array(e),this.lazy=r.lazy??0,this.compressionType=r.compressionType??2,r.outputBuffer?this.output=r.outputBuffer instanceof Uint8Array?r.outputBuffer:new Uint8Array(r.outputBuffer):this.output=new Uint8Array(32768),this.op=r.outputIndex??0}compress(){var e=this.input,r=e.length;switch(this.compressionType){case 0:for(var i=0,r=e.length;i<r;){var a=e.subarray(i,i+65535);i+=a.length,this.makeNocompressBlock(a,i===r)}break;case 1:this.output=this.makeFixedHuffmanBlock(e,!0),this.op=this.output.length;break;case 2:this.output=this.makeDynamicHuffmanBlock(e,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output}makeNocompressBlock(e,r){var i=this.output;i=new Uint8Array(this.output.buffer);for(var a=new d(i,this.op),s=i.length;s<=this.op+e.length+5;)s=s<<1;a.expandLength(s);var n=0;a.writeByte((r?1:0)|n<<1);var s=e.length,f=s^65535;return a.writeShort(s),a.writeShort(f),a.writeArray(e),a.truncateBuffer(a.p),this.output=a.buffer,this.op=a.p,i}makeFixedHuffmanBlock(e,r){var i=new S(new Uint8Array(this.output.buffer),this.op);i.writeBits(r?1:0,1,!0),i.writeBits(1,2,!0);var a=new M(e,this.lazy);return a.encode(),this.fixedHuffman(a,i),i.finish()}makeDynamicHuffmanBlock(e,r){var i=new S(new Uint8Array(this.output.buffer),this.op);i.writeBits(r?1:0,1,!0),i.writeBits(2,2,!0);var a=new M(e,this.lazy),n=a.encode(),s=this.getLengths(a.freqsLitLen,15),f=this.getCodesFromLengths(s),o=this.getLengths(a.freqsDist,7),u=this.getCodesFromLengths(o),b,m;for(b=286;b>257&&s[b-1]===0;b--);for(m=30;m>1&&o[m-1]===0;m--);var l=this.getTreeSymbols(b,s,m,o),h=this.getLengths(l.freqs,7),c=new Array(19);for(w=0;w<19;w++)c[w]=h[N[w]];for(var x=19;x>4&&c[x-1]===0;x--);var D=this.getCodesFromLengths(h);for(i.writeBits(b-257,5,!0),i.writeBits(m-1,5,!0),i.writeBits(x-4,4,!0),w=0;w<x;w++)i.writeBits(c[w],3,!0);for(var w=0;w<l.codes.length;w++){var v=l.codes[w],p;if(i.writeBits(D[v],h[v],!0),v>=16){switch(w++,v){case 16:p=2;break;case 17:p=3;break;case 18:p=7;break;default:throw"invalid code: "+v}i.writeBits(l.codes[w],p,!0)}}return this.dynamicHuffman(n,[f,s],[u,o],i),i.finish()}dynamicHuffman(e,r,i,a){for(var n=r[0],s=r[1],f=i[0],o=i[1],u=0;u<e.length;++u){var b=e[u],m;if(a.writeBits(n[b],s[b],!0),b>256)a.writeBits(e[++u],e[++u],!0),m=e[++u],a.writeBits(f[m],o[m],!0),a.writeBits(e[++u],e[++u],!0);else if(b===256)break}return a}fixedHuffman(e,r){for(var i=e.output,a=0;a<i.length;a++){var n=i[a],s=ve[n];if(r.writeBits(s[0],s[1]),n>256)r.writeBits(i[++a],i[++a],!0),r.writeBits(i[++a],5),r.writeBits(i[++a],i[++a],!0);else if(n===256)break}return r}getTreeSymbols(e,r,i,a){var n=new Uint32Array(e+i),s,f,o=e+i,u=new Uint32Array(316),b=new Uint8Array(19);for(f=0,s=0;s<e;s++)n[f++]=r[s];for(s=0;s<i;s++)n[f++]=a[s];var m=0;for(s=0,o=n.length;s<o;s+=f){for(f=1;s+f<o&&n[s+f]===n[s];++f);var l=f;if(n[s]===0)if(l<3)for(;l-- >0;)u[m++]=0,b[0]++;else for(;l>0;){var h=l<138?l:138;h>l-3&&h<l&&(h=l-3),h<=10?(u[m++]=17,u[m++]=h-3,b[17]++):(u[m++]=18,u[m++]=h-11,b[18]++),l-=h}else if(u[m++]=n[s],b[n[s]]++,l--,l<3)for(;l-- >0;)u[m++]=n[s],b[n[s]]++;else for(;l>0;){var h=l<6?l:6;h>l-3&&h<l&&(h=l-3),u[m++]=16,u[m++]=h-3,b[16]++,l-=h}}return{codes:u.subarray(0,m),freqs:b}}getLengths(e,r){for(var i=e.length,a=new z(2*ce),n=new Uint8Array(i),s=0;s<i;++s)e[s]>0&&a.push(s,e[s]);var f=new Array(a.nodes),o=new Uint32Array(a.nodes);if(f.length===1)return n[a.pop().index]=1,n;for(var u=a.nodes,s=0;s<u;++s)f[s]=a.pop(),o[s]=f[s].value;var b=this.reversePackageMerge(o,o.length,r);for(s=0;s<f.length;++s)n[f[s].index]=b[s];return n}reversePackageMerge(e,r,i){var a=new Uint16Array(i),n=new Array(i),s=new Uint8Array(r).fill(i),f=new Array(i),o=new Array(i),u=new Array(i).fill(0);function b(v){var p=o[v][u[v]];p===r?(b(v+1),b(v+1)):s[p]--,u[v]++}a[i-1]=r;for(var m=(1<<i)-r,l=1<<i-1,h=0;h<i;++h)m<l?n[h]=!1:(n[h]=!0,m-=l),m<<=1,a[i-2-h]=(a[i-1-h]>>>1)+r;a[0]=Number(n[0]),f[0]=new Array(a[0]),o[0]=new Array(a[0]);for(var h=1;h<i;++h)a[h]>2*a[h-1]+Number(n[h])&&(a[h]=2*a[h-1]+Number(n[h])),f[h]=new Array(a[h]),o[h]=new Array(a[h]);for(var c=0;c<a[i-1];++c)f[i-1][c]=e[c],o[i-1][c]=c;n[i-1]&&(s[0]--,u[i-1]++);for(var h=i-2;h>=0;h--){for(var x=0,D=u[h+1],c=0;c<a[h];c++){var w=f[h+1][D]+f[h+1][D+1];w>e[x]?(f[h][c]=w,o[h][c]=r,D+=2):(f[h][c]=e[x],o[h][c]=x,x++)}u[h]=0,n[h]&&b(h)}return s}getCodesFromLengths(e){for(var r=new Uint16Array(e.length),i=[],a=[],n=0,s,f,o=0;o<e.length;o++)i[e[o]]=(i[e[o]]??0)+1;for(var o=1;o<=pe;o++)a[o]=n,n+=i[o]??0,n<<=1;for(var o=0;o<e.length;o++)for(n=a[e[o]],a[e[o]]+=1,r[o]=0,s=0;s<e[o];s++)r[o]=r[o]<<1|n&1,n>>>=1;return r}};var I=new Uint8Array([31,139]);var R=class{constructor(e,r={}){this.ip=0;this.output=null;this.op=0;this.crc32=null;this.filename="";this.comment="";this.input=e,this.flags={},r.filename&&(this.filename=r.filename,this.flags.fname=!0),r.comment&&(this.comment=r.comment??"",this.flags.fcomment=!0),r.hcrc&&(this.flags.fhcrc=!0),this.deflateOptions=r.deflateOptions??{}}compress(){var e=new Uint8Array(32768),h=new d(e,0),r=this.input,i=this.ip,a=this.filename,n=this.comment;h.writeArray(I),h.writeByte(8);var s=0;this.flags.fname&&(s|=8),this.flags.fcomment&&(s|=16),this.flags.fhcrc&&(s|=2),h.writeByte(s);var f=Math.floor(Date.now()/1e3);if(h.writeUint(f),h.writeByte(0),h.writeByte(3),this.flags.fname){for(var o=0;o<a.length;++o){var u=a.charCodeAt(o);u>255?h.writeShort(u):h.writeByte(u)}h.writeByte(0)}if(this.flags.fcomment){for(var o=0;o<n.length;++o){var u=n.charCodeAt(o);u>255?h.writeShort(u):h.writeByte(u)}h.writeByte(0)}if(this.flags.fhcrc){var b=y.create(e,0,h.p)&65535;h.writeShort(b)}this.deflateOptions.outputBuffer=e,this.deflateOptions.outputIndex=h.p;var m=new T(r,this.deflateOptions);e=m.compress();var l=m.op;l+8>e.length&&(this.output=new Uint8Array(l+8),this.output.set(new Uint8Array(e)),e=this.output);var h=new d(e,l);this.crc32=y.create(r),h.writeUint(this.crc32);var c=r.length;return h.writeUint(c),this.ip=i,h.p<e.length&&(this.output=e=e.subarray(0,l)),e}};var P=class{constructor(e){this.ip=0;this.members=[];this.decompressed=!1;this.crc32=null;this.input=e}getMembers(){return this.decompressed||this.decompress(),this.members.slice()}decompress(){for(var e=this.input.length;this.ip<e;)this.decodeMember();return this.decompressed=!0,this.concatMember()}decodeMember(){var e={},r=this.input,i=new d(r,this.ip);if(e.id1=i.readByte(),e.id2=i.readByte(),e.id1!==I[0]||e.id2!==I[1])throw new Error("invalid file signature:"+e.id1+","+e.id2);if(e.cm=i.readByte(),e.cm!=8)throw new Error("unknown compression method: "+e.cm);var a=i.readByte();e.flg=a;var n=i.readUint();if(e.mtime=new Date(n*1e3),e.xfl=i.readByte(),e.os=i.readByte(),a&4&&(e.xlen=i.readShort(),i.p=this.decodeSubField(i.p,e.xlen)),a&8){for(var s="",f=1;f!=0&&(f=i.readByte(),f!=0);)s+=String.fromCharCode(f);e.name=s}if(a&16){for(var s="",f=1;f!=0&&(f=i.readByte(),f!=0);)s+=String.fromCharCode(f);e.comment=s}if((a&2)>0&&(e.crc16=y.create(r,0,i.p)&65535,e.crc16!==i.readShort()))throw new Error("invalid header crc16");var l=(r[r.length-4]|r[r.length-3]<<8|r[r.length-2]<<16|r[r.length-1]<<24)>>>0,o=void 0;r.length-i.p-4-4<l*512&&(o=l);var u=new B(r,{index:i.p,bufferSize:o}),b=u.decompress();e.data=b,i=new d(r,u.ip);var m=i.readUint();if(this.crc32=y.create(b),this.crc32!==m)throw new Error("invalid CRC-32 checksum: 0x"+y.create(b).toString(16)+" / 0x"+m.toString(16));var l=i.readUint();if((b.length&4294967295)!==l)throw new Error("invalid input size: "+(b.length&4294967295)+" / "+l);this.members.push(e),this.ip=i.p}decodeSubField(e,r){return e+r}concatMember(){for(var e=this.members,r=0,i=0;i<e.length;++i)r+=e[i].data.length;for(var a=0,n=new Uint8Array(r),i=0;i<e.length;++i)n.set(e[i].data,a),a+=e[i].data.length;return n}};var k={getByte(t){var e=t[2]&65535|2;return e*(e^1)>>8&255},updateKeys(t,e){t[0]=y.single(e,t[0]),t[1]=t[1]+(t[0]&255),t[1]=Number(Math.imul(t[1],134775813)+1&4294967295),t[2]=y.single(t[1]>>>24,t[2])},createKey(t){typeof t=="string"&&(t=A(t));for(var e=new Uint32Array([305419896,591751049,878082192]),r=0;r<t.length;++r)this.updateKeys(e,t[r]&255);return e},decode(t,e){return e^=this.getByte(t),this.updateKeys(t,e),e},encode(t,e){var r=this.getByte(t);return this.updateKeys(t,e),r^e}};var C=new Uint8Array([80,75,1,2]),L=new Uint8Array([80,75,3,4]),g=new Uint8Array([80,75,5,6]),K=class{constructor(e=[]){this.files=[];this.password=null;this.comment=e instanceof Uint8Array?e:new Uint8Array(e)}addFile(e,r="",i={}){var a=e.length;e=e instanceof Uint8Array?e:new Uint8Array(e);var n=i.compressionMethod??8,s=0,f=!1;i.compress!=!1&&n==8&&(s=y.create(e),e=this.deflateWithOption(e,i),f=!0),this.files.push({filename:r,buffer:e,compressionMethod:n,option:i,compressed:f,encrypted:!1,size:a,crc32:s})}setPassword(e){this.password=e}compress(){for(var e=this.files,r=0,i=0,a=0;a<e.length;++a){var n=e[a],s=n.filename.length,f=n.option.extraField?n.option.extraField.length:0,o=n.option.comment?n.option.comment.length:0,u=n.option.date??new Date;if(n.option.mtime=new Uint8Array([(u.getMinutes()&7)<<5|u.getSeconds()>>>1,u.getHours()<<3|u.getMinutes()>>3,(u.getMonth()+1&7)<<5|u.getDate(),(u.getFullYear()-1980&127)<<1|u.getMonth()+1>>3]),n.compressed||(n.crc32=y.create(n.buffer),n.compressionMethod==8&&(n.buffer=this.deflateWithOption(n.buffer,n.option),n.compressed=!0)),n.option.password!=null||this.password!=null){var b=k.createKey(n.option.password??this.password);console.log(b);var m=n.buffer,l=new Uint8Array(m.length+12);l.set(m,12),m=l;for(var h=new d(m,0),c=0;c<12;++c){var x=m[c];c==10&&(x=n.crc32>>>8&255),c==11&&(x=n.crc32>>>0&255),m[c]=k.encode(b,x),console.log(x)}for(;c<m.length;++c)m[c]=k.encode(b,m[c]);n.buffer=m}r+=30+s+n.buffer.length,i+=46+s+o}var D=22+(this.comment?this.comment.length:0),w=new Uint8Array(r+i+D),v=new d(w,0),p=new d(w,r);for(a=0;a<e.length;++a){var n=e[a],s=n.filename.length,f=0,o=n.option.comment?n.option.comment.length:0,ue=v.p;v.writeArray(L),p.writeArray(C);var _=20;p.writeByte(_&255),p.writeByte(n.option.os??0),v.writeShort(_),p.writeShort(_);var W=0;(n.option.password!=null||this.password!=null)&&(W|=1),v.writeShort(W),p.writeShort(W);var $=n.compressionMethod;v.writeShort($),p.writeShort($),v.writeArray(n.option.mtime),p.writeArray(n.option.mtime);var Z=n.crc32;v.writeUint(Z),p.writeUint(Z);var j=n.buffer.length;v.writeUint(j),p.writeUint(j);var G=n.size;v.writeUint(G),p.writeUint(G),v.writeShort(s),p.writeShort(s),v.writeShort(f),p.writeShort(f),p.writeShort(o),p.writeByte(0),p.writeByte(0),p.writeByte(0),p.writeByte(0),p.writeByte(0),p.writeByte(0),p.writeByte(0),p.writeByte(0),p.writeUint(ue);var ee=n.filename;if(ee){var re=A(ee);v.writeArray(re),p.writeArray(re)}var Q=n.option.extraField;Q&&(v.writeArray(Q),p.writeArray(Q));var te=n.option.comment;if(te){var he=A(te);p.writeArray(he)}v.writeArray(n.buffer)}var U=new d(w,r+i);return U.writeArray(g),U.writeByte(0),U.writeByte(0),U.writeByte(0),U.writeByte(0),U.writeShort(e.length),U.writeShort(e.length),U.writeUint(i),U.writeUint(r),o=this.comment?this.comment.length:0,U.writeShort(o),this.comment&&U.writeArray(this.comment),w}deflateWithOption(e,r){var i=new T(e,r.deflateOptions);return i.compress()}};function de(t){var e={};if(e.offset=t.p,t.readByte()!=L[0]||t.readByte()!=L[1]||t.readByte()!=L[2]||t.readByte()!=L[3])throw new Error("invalid local file header signature");return e.needVersion=t.readShort(),e.flags=t.readShort(),e.compression=t.readShort(),e.time=t.readShort(),e.date=t.readShort(),e.crc32=t.readUint(),e.compressedSize=t.readUint(),e.plainSize=t.readUint(),e.fileNameLength=t.readShort(),e.extraFieldLength=t.readShort(),e.filename=t.readString(e.fileNameLength),e.extraField=t.readArray(e.extraFieldLength),e.length=t.p-e.offset,e}function we(t){var e={};if(e.offset=t.p,t.readByte()!=C[0]||t.readByte()!=C[1]||t.readByte()!=C[2]||t.readByte()!=C[3])throw new Error("invalid file header signature");return e.version=t.readByte(),e.os=t.readByte(),e.needVersion=t.readShort(),e.flags=t.readShort(),e.compression=t.readShort(),e.time=t.readShort(),e.date=t.readShort(),e.crc32=t.readUint(),e.compressedSize=t.readUint(),e.plainSize=t.readUint(),e.fileNameLength=t.readShort(),e.extraFieldLength=t.readShort(),e.fileCommentLength=t.readShort(),e.diskNumberStart=t.readShort(),e.internalFileAttributes=t.readShort(),e.externalFileAttributes=t.readUint(),e.relativeOffset=t.readUint(),e.filename=t.readString(e.fileNameLength),e.extraField=t.readArray(e.extraFieldLength),e.comment=t.readArray(e.fileCommentLength),e.length=t.p-e.offset,e}function ye(t){for(var e=t.length-12;e>0;--e)if(t[e]===g[0]&&t[e+1]===g[1]&&t[e+2]===g[2]&&t[e+3]===g[3])return e;throw new Error("End of Central Directory Record not found")}function xe(t){var e={};let r=ye(t),i=new d(t,r);if(i.readByte()!==g[0]||i.readByte()!==g[1]||i.readByte()!==g[2]||i.readByte()!==g[3])throw new Error("invalid signature");return e.numberOfThisDisk=i.readShort(),e.startDisk=i.readShort(),e.totalEntriesThisDisk=i.readShort(),e.totalEntries=i.readShort(),e.centralDirectorySize=i.readUint(),e.centralDirectoryOffset=i.readUint(),e.commentLength=i.readShort(),e.comment=i.readArray(e.commentLength),e}var Y=class{constructor(e,r={}){this.ip=0;this.EOCD=null;this.input=e instanceof Uint8Array?e:new Uint8Array(e),this.verify=r.verify??!1,r.password&&(this.password=typeof r.password=="string"?A(r.password):r.password instanceof Uint8Array?r.password:new Uint8Array(r.password))}parseFileHeader(){var e=[],r={};if(!this.fileHeaderList){for(var i=xe(this.input),a=new d(this.input,i.centralDirectoryOffset),n=0;n<i.totalEntries;++n){var s=we(a);e[n]=s,r[s.filename]=n}if(i.centralDirectorySize<a.p-i.centralDirectoryOffset)throw new Error("invalid file header size");this.EOCD=i,this.fileHeaderList=e,this.filenameToIndex=r}}getFileData(e,r={}){var i=this.input,a=this.fileHeaderList,n;if(a||this.parseFileHeader(),a[e]==null)throw new Error("wrong index");var s=a[e].relativeOffset,f=new d(this.input,s),o=de(f);s+=o.length;var u=o.compressedSize;if(o.flags&1){var b=r.password??this.password;if(!b)throw new Error("encrypted: please set password");for(var m=k.createKey(b),l=s;l<s+12;++l)k.decode(m,i[l]),console.log(i[l]);console.log(o.crc32),s+=12,u-=12;for(var l=s;l<s+u;++l)i[l]=k.decode(m,i[l])}if(o.compression==8?n=new B(this.input,{index:s,bufferSize:o.plainSize}).decompress():n=this.input.subarray(s,s+u),this.verify){var h=y.create(n);if(o.crc32!==h)throw new Error("Incorrect crc: file=0x"+o.crc32.toString(16)+", data=0x"+h.toString(16))}return n}getFilenames(){var e=[];this.fileHeaderList||this.parseFileHeader();for(var r=this.fileHeaderList,i=0;i<r.length;++i)e[i]=r[i].filename;return e}decompress(e,r={}){this.filenameToIndex||this.parseFileHeader();var i=this.filenameToIndex[e];if(i==null)throw new Error(e+" not found");return this.getFileData(i,r)}setPassword(e){typeof e=="string"?this.password=A(e):this.password=e instanceof Uint8Array?e:new Uint8Array(e)}};var q={create(t){return typeof t=="string"?t=A(t):t instanceof Uint8Array||(t=new Uint8Array(t)),this.update(1,t)},update(t,e,r,i=0){var a=t&65535,n=t>>16&65535;for(r=r??e.length;r>0;){var s=r>this.OptimizationParameter?this.OptimizationParameter:r;r-=s;do a+=e[i++],n+=a;while(--s);a%=65521,n%=65521}return(n<<16|a)>>>0},OptimizationParameter:1024};var V=class t{constructor(e,r={}){this.adler32=null;this.input=e,this.output=new Uint8Array(32768);var i={};this.compressionType=r.compressionType??2,Object.assign(i,r),i.outputBuffer=this.output,this.rawDeflate=new T(this.input,i)}static compress(e,r){return new t(e,r).compress()}compress(){var e=new d(this.output,0),r=120;e.writeByte(r);var i=0,a=this.compressionType,n=a<<6|i<<5,s=31-((r<<8)+n)%31;n|=s,e.writeByte(n);var f=q.create(this.input);this.adler32=f,this.rawDeflate.op=e.p;var o=this.rawDeflate.compress(),u=o.length;return e.buffer=o,e.restoreBuffer(),e.setLength(u+4),e.p=u,e.writeUintBE(f),this.output=e.buffer,this.output}};var X=class{constructor(e,r={}){this.ip=0;this.adler32=null;this.input=e,this.ip=r.index??0,this.verify=r.verify??!1;var i=e[this.ip++],a=e[this.ip++];if((i&15)!=8)throw new Error("unsupported compression method");if(((i<<8)+a)%31!==0)throw new Error("invalid fcheck flag:"+((i<<8)+a)%31);if(a&32)throw new Error("fdict flag is not supported");this.rawinflate=new B(e,{index:this.ip,bufferSize:r.bufferSize,bufferType:r.bufferType,resize:r.resize})}decompress(){var e=this.input,r;if(r=this.rawinflate.decompress(),this.ip=this.rawinflate.ip,this.verify){var i=new d(e,this.ip),a=q.create(r);if(this.adler32=a,a!==i.readUintBE())throw new Error("invalid adler-32 checksum")}return r}};var Ue={GZip:R,GUnzip:P,Zip:K,Unzip:Y,Deflate:V,Inflate:X};window.Zlib=Ue;})();
